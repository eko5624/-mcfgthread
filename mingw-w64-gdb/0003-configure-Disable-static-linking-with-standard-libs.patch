From 9d23b6fb406c7a8f4d1bff38a318de49e3c9bb9f Mon Sep 17 00:00:00 2001
From: Orgad Shaneh <orgads@gmail.com>
Date: Tue, 7 Mar 2017 19:13:41 +0200
Subject: [PATCH 3/6] configure: Disable static linking with standard libs

Linking statically causes spurious crashes on exception handling
with mingw32.
---
 configure | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/configure b/configure
index dd743c58663..f49009ae3ac 100755
--- a/configure
+++ b/configure
@@ -8464,7 +8464,7 @@ else
  # trust that they are doing what they want.
  if test "$with_static_standard_libraries" = yes -a "$stage1_libs" = "" \
      -a "$have_static_libs" = yes; then
-   stage1_ldflags="-static-libstdc++ -static-libgcc"
+   stage1_ldflags=""
  fi
 fi
 
@@ -8500,7 +8500,7 @@ else
  # statically.  But if the user explicitly specified the libraries to
  # use, trust that they are doing what they want.
  if test "$poststage1_libs" = ""; then
-   poststage1_ldflags="-static-libstdc++ -static-libgcc"
+   poststage1_ldflags=""
  fi
 fi
 
-- 
2.42.1

